<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>Noisebridge Learning Python - advanced</title>
        <link rel="stylesheet" href="../theme/css/main.css">
                <link href="http://www.pycourse.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Noisebridge Learning Python Atom Feed" />
                
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">Noisebridge Learning Python </a></h1>
                <nav><ul>
                                                    <li><a href="../advanced-class-schedule/">Advanced Class Schedule</a></li>
                                    <li><a href="../schedule/">Class Schedule</a></li>
                                    <li><a href="../syllabus/">Welcome to Noisebridge Learning Python Class</a></li>
                                                                    <li class="active"><a href="../category/advanced.html">advanced</a></li>
                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../posts/2013/Jul/02/generators-in-python/">Generators in Python</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2013-07-02T14:00:00">
                Tue 02 July 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/kellan.html">Kellan</a>
        </address>
        <p>In <a href="../category/advanced.html">advanced</a>. </p>

</footer><!-- /.post-info --><div class="section" id="iteration">
<h2>Iteration</h2>
<p>In python objects such as strings, lists and dictionaries iterable. Simplified we can loop over them.</p>
<div class="highlight"><pre><span class="c"># Strings</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&quot;Kellan Jacobs&quot;</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">x</span>

<span class="c"># Lists</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
    <span class="k">print</span> <span class="n">x</span>

<span class="c"># Same for Dictionaries</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">{</span><span class="s">&quot;First&quot;</span><span class="p">:</span> <span class="s">&quot;Kellan&quot;</span><span class="p">,</span> <span class="s">&quot;Last&quot;</span><span class="p">:</span> <span class="s">&quot;Jacobs&quot;</span><span class="p">}:</span>
    <span class="k">print</span> <span class="n">x</span>
</pre></div>
<p>Under the hood python is calling the objects <tt class="docutils literal">__iter__</tt> and <tt class="docutils literal">__next__</tt> methods. Take the following code sample</p>
<div class="highlight"><pre><span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Kellan&#39;</span><span class="p">,</span> <span class="s">&#39;Jacobs&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mylist</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">x</span>
</pre></div>
<p>Python changes this into a while loop that looks like this.</p>
<div class="highlight"><pre><span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Kellan&#39;</span><span class="p">,</span> <span class="s">&#39;Jacobs&#39;</span><span class="p">]</span>
<span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">mylist</span><span class="p">)</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="k">print</span> <span class="n">x</span>
    <span class="k">except</span> <span class="n">StopIternation</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
<div class="section" id="vocabulary-time">
<h2>Vocabulary Time</h2>
<p>There are two words I will use over and over. It is important to define them here.</p>
<dl class="docutils">
<dt><strong>Iterator</strong></dt>
<dd>Is good for one pass over the data. It has both a <tt class="docutils literal">__iter__</tt> and <tt class="docutils literal">__next__</tt> method defined. The data is exausted after one pass over the data.</dd>
<dt><strong>Iterable</strong></dt>
<dd>An Iterable is an object that has a <tt class="docutils literal">__iter__</tt> method and returns an iterator.</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples</h2>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Counter</span><span class="p">(</span> <span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span> <span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span> <span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">num</span>

<span class="k">print</span> <span class="s">&quot;Lets do it again&quot;</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">num</span>
</pre></div>
<p>Another example trying to print a matrix using these iterators.</p>
<div class="highlight"><pre><span class="c"># c2 = Counter(3)</span>
<span class="c"># c3 = Counter(3)</span>

<span class="c"># for x in c2:</span>
<span class="c">#     for y in c3:</span>
<span class="c">#         print x, y</span>

<span class="n">c2</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c2</span><span class="p">:</span>
    <span class="n">c3</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">c3</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</pre></div>
<p>Lets do the same thing but with an iterable</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Counter2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Counter2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">num</span>

<span class="n">rows</span> <span class="o">=</span> <span class="n">Counter2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">Counter2</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span>
</pre></div>
</div>
<div class="section" id="generators">
<h2>Generators</h2>
<p>Generators are functions that return iterator and contains a yield statement. When python hits a yield statement it suspends processing remembering the state of the function. They are used with a for loop.</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">fun_gen</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;generate&quot;</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>

<span class="k">print</span> <span class="n">fun_gen</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">normal</span><span class="p">():</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span>

<span class="k">print</span> <span class="n">normal</span><span class="p">()</span>
</pre></div>
<p>Generator functions return a generator object. Where a normal function returns none. Generators are lazy they don't actually do any work unitl the next() method is called.</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">fun_gen</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">x</span>
</pre></div>
<p>Lets create the simple counter as a generator.</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">count_generator</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">cur</span> <span class="o">&lt;=</span> <span class="n">size</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">cur</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">count_generator</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">num</span>
</pre></div>
<p>Generators can also be created as part of an object.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Counter3</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">cur</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">cur</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">c1</span> <span class="o">=</span> <span class="n">Counter3</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c1</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">x</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c1</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">x</span>
</pre></div>
<p>One of the side effects of creating a generator as an object is they can be reused as long as your object doesn't store the state.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Counter4</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="n">c1</span> <span class="o">=</span> <span class="n">Counter4</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c1</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">x</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">c1</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">x</span>
</pre></div>
<p>Once we save state in the object it can't be used more than once.</p>
</div>
<div class="section" id="when-to-think-about-using-generators">
<h2>When to think about using generators</h2>
<ul class="simple">
<li>When you are tight on memory.</li>
<li>When use are using a result list</li>
<li>When you will only need to iterate over the data set once</li>
</ul>
</div>
<div class="section" id="generator-gotcha-s">
<h2>Generator Gotcha's</h2>
<ul class="simple">
<li>Generators may be slower than a list</li>
<li>Generators don't have a length</li>
<li>Generators always evaluate to true</li>
</ul>
</div>
<p>There are <a href="../posts/2013/Jul/02/generators-in-python/#disqus_thread">comments</a>.</p>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../posts/2013/May/13/deployment-tutorial/" rel="bookmark"
                           title="Permalink to Deploy Tutorial May 14, 2013">Deploy Tutorial May 14, 2013</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-05-13T22:00:00">
                Mon 13 May 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/kellan.html">Kellan</a>
        </address>
        <p>In <a href="../category/advanced.html">advanced</a>. </p>

</footer><!-- /.post-info -->                <p class="first last">Using fabric to deploy python apps</p>

                <a class="readmore" href="../posts/2013/May/13/deployment-tutorial/">read more</a>
                <p>There are <a href="../posts/2013/May/13/deployment-tutorial/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../posts/2013/Jan/16/installing-postgresql-macosx/" rel="bookmark"
                           title="Permalink to Installing PostgreSQL on Mac OSX 10.8">Installing PostgreSQL on Mac OSX 10.8</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-01-16T14:00:00">
                Wed 16 January 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/kellan.html">Kellan</a>
        </address>
        <p>In <a href="../category/advanced.html">advanced</a>. </p>

</footer><!-- /.post-info -->                <p class="first last">Installing PostgreSQL on OSX 10.8</p>

                <a class="readmore" href="../posts/2013/Jan/16/installing-postgresql-macosx/">read more</a>
                <p>There are <a href="../posts/2013/Jan/16/installing-postgresql-macosx/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../posts/2013/Jan/12/dojo-notes/" rel="bookmark"
                           title="Permalink to Advanced Class Dojo Notes 2013-01-12">Advanced Class Dojo Notes 2013-01-12</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-01-12T14:00:00">
                Sat 12 January 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/kellan.html">Kellan</a>
        </address>
        <p>In <a href="../category/advanced.html">advanced</a>. </p>

</footer><!-- /.post-info -->                <p class="first last">Notes from Advanced Class Dojo on 2013-01-12</p>

                <a class="readmore" href="../posts/2013/Jan/12/dojo-notes/">read more</a>
                <p>There are <a href="../posts/2013/Jan/12/dojo-notes/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../posts/2013/Jan/10/installing-postgresql-ubuntu/" rel="bookmark"
                           title="Permalink to Installing PostgreSQL on Ubuntu 12.04">Installing PostgreSQL on Ubuntu 12.04</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-01-10T14:00:00">
                Thu 10 January 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/kellan.html">Kellan</a>
        </address>
        <p>In <a href="../category/advanced.html">advanced</a>. </p>

</footer><!-- /.post-info -->                <p class="first last">Installing PostgreSQL on Ubuntu 12.04</p>

                <a class="readmore" href="../posts/2013/Jan/10/installing-postgresql-ubuntu/">read more</a>
                <p>There are <a href="../posts/2013/Jan/10/installing-postgresql-ubuntu/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 1
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://www.pycourse.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://www.eleddy.com">Liz's Site</a></li>
                                                    <li><a href="http://twitter.com/eleddy">Liz's Twitter</a></li>
                                                    <li><a href="http://kellanjacobs.com">Kellan's Site</a></li>
                                                    <li><a href="http://twitter.com/kellanjacobs">Kellan's Twitter</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'pycourse';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>